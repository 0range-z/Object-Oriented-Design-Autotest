# Object-Oriented-Design-Autotest
北航 OO 2020 自动测评



## 概述

OO中测太弱，指导书样例等于没有，而强测太狠，互测恐怖如斯，怎么破？

写对拍！

这里是俺本学期攒下来的自动测评程序（致谢室友、其他同学以及github前辈的支持

**附赠2020指导书！**在`guidebooks`目录下



## 使用方法

每个自动测评包括三部分：数据生成generator、对拍beatmatching、结果判定judger，其中结果判定除第二单元外均集成在对拍中

每次的`BeatMatching`大体相似，若某次作业beatmatching有bug可以尝试使用后一次作业的

整体上使用方法为：`projects`目录下建立一个或多个子目录，每个目录对应一个人，目录名用来作为不同人的代号。

目录下放置的文件如下所述，之后运行`BeatMatching.py`按照提示即可，通常包括自动生成数据测试以及从`in.txt`读入两种方式（其中in.txt读取会忽略空行，并且读到END时自动结束，可以加以利用）

### 目录中的文件

### 第一单元

有两种方式（需要将beatmatching开头的MODE改成对应的后缀名）：

（1）放置.java，自动编译

（2）放置编译后的.class

.java的文件树如下，.class类似

```
|____projects
| |____person2
| | |____MainClass.java
| | |____a.java
| |____person1
| | |____MainClass.java
| | |____a.java
```

这里默认主类名为`MainClass`，可以修改beatmatching中的对应文件名

后来发现这种编译会有一些问题（例如package、jdk版本、dependency等），于是其他单元采取的方法是直接用idea打包成jar，有兴趣的同学可以用后面单元的beatmatching魔改一下第一单元的（~~现在回看第一单元写的对拍真是惨不忍睹~~）



### 第二单元至第四单元

使用idea打包为jar，放置在对应目录下，即：

```
|____projects
| |____person2
| | |____homework2.jar
| |____person1
| | |____homework2.jar
```

将beatmatching文件开头的FILE_NAME_LIST修改为所有jar名的集合



### 数据生成与正确性判定

| 单元                    | 数据生成                 | 正确性判定     | 附加特性                                            |
| ----------------------- | ------------------------ | -------------- | --------------------------------------------------- |
| 第一单元（表达式求导）  | xeger根据正则表达式生成* | sympy求导比对  | 显示结果长度及性能分（性能分）                      |
| 第二单元（多线程电梯）  | random库、手写生成逻辑   | 手写判定逻辑   | 显示电梯时间（性能分）；通过datacheck判定合法性 *** |
| 第三单元（JML社交网络） | random库、手写生成逻辑   | 多人对拍找不同 | 显示运行时间                                        |
| 第四单元（UML图解析）   | 来自Github**（HW13）     | 多人对拍找不同 | 显示运行时间                                        |

*其中第三次作业的生成器使用了Github上一个code，找不到源链接了

**Github链接：https://github.com/lpxofbuaa/BUAA_OO_UML_1_AUTOTEST 使用了该库的dataMake

在此感谢两位前辈

***电梯时间以输出的最后一条为准；datacheck是本学期课程组下发的官方包，为windows版本，jugder里自动调用判定，若所有人时间均大于指导书的互测时间限制则认为数据无效。可自行魔改



## 特别提醒

1、此为2020年OO作业版本，**每年指导书均有变化**，请仔细甄别（已将指导书放在`guidebooks`目录下，可自行比对），特别是性能分计算方面

2、后两个单元判定正确性依靠对拍，因此你需要大佬同学一起~~多人运动~~，否则难以发现错误（前两个单元由于正确输出的多样性，没有采用该方式；~~后两个单元由于judger不好写，采用了对拍~~）

3、数据生成器强度有限，且不保证覆盖性，可自行魔改

4、每次的`BeatMatching`大体相似，因此我进行的是迭代性开发，若某次作业beatmatching有bug，可以尝试使用本单元最后一次的，**特别是第一单元的自动编译，不妨尝试后几个单元的打包成jar的方式**

5、前几个单元的对拍过得比较久，可能仍有注意事项忘记说，有疑问可联系wzk1015@buaa.edu.cn